{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hetawk/Documents/CODING_ENV/web/FullStack/Blog/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/hetawk/Documents/CODING_ENV/web/FullStack/Blog/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/hetawk/Documents/CODING_ENV/web/FullStack/Blog/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./Write.css\";// import PostBackground from \"../img/car1.jpeg\";\nimport{useContext,useState}from\"react\";import axios from\"axios\";import{Context}from\"../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Write(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],setDesc=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useContext=useContext(Context),user=_useContext.user;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var newPost,data,filename,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={username:user.username,title:title,desc:desc};// uploading file\nif(!file){_context.next=16;break;}data=new FormData();filename=Date.now()+file.name;data.append(\"name\",filename);data.append(\"file\",file);newPost.photo=filename;_context.prev=8;_context.next=11;return axios.post(\"/upload\",data);case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](8);console.log(\"File handling error\");case 16:_context.prev=16;_context.next=19;return axios.post(\"/posts\",newPost);case 19:res=_context.sent;window.location.replace(\"/post/\"+res.data._id);_context.next=26;break;case 23:_context.prev=23;_context.t1=_context[\"catch\"](16);console.log(\"File handling error\");case 26:case\"end\":return _context.stop();}}},_callee,null,[[8,13],[16,23]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"write\",children:[file&&/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"\",className:\"writeImg\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"writeForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"writeIcon fas fa-plus\"})}),\"                                                      \",/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:\"none\"},onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",className:\"writeInput\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormGroup\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormTextArea\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormGroupTextBar\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"bold\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-bold\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"italic\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-italic\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"underline\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-underline\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"insertOrderedList\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-list-ol\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"insertUnorderList\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-list-ul\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"createLink\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-link\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"justifyLeft\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-align-left\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"justifyCenter\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-align-center\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"justifyRight\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-align-right\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"justifyFull\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-align-justify\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"writeIconHeader btn\",\"data-element\":\"insertImage\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-image\"})})]}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"writeInput writeText\",placeholder:\"Tell your story...\",onChange:function onChange(e){return setDesc(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"writeSubmit\",type:\"submit\",children:\"Publish\"})]})]})]});}","map":{"version":3,"names":["useContext","useState","axios","Context","Write","title","setTitle","desc","setDesc","file","setFile","user","handleSubmit","e","preventDefault","newPost","username","data","FormData","filename","Date","now","name","append","photo","post","console","log","res","window","location","replace","_id","URL","createObjectURL","display","target","files","value"],"sources":["/Users/hetawk/Documents/CODING_ENV/web/FullStack/Blog/app/src/Pages/Write.jsx"],"sourcesContent":["import \"./Write.css\";\n// import PostBackground from \"../img/car1.jpeg\";\nimport { useContext, useState } from \"react\";\nimport axios from \"axios\";\nimport { Context } from \"../context/Context\";\n\nexport default function Write\n    () {\n    const [title, setTitle] = useState(\"\");\n    const [desc, setDesc] = useState(\"\");\n    const [file, setFile] = useState(null);\n    const { user } = useContext(Context);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const newPost = {\n            username: user.username,\n            title,\n            desc,\n        }\n        // uploading file\n        if (file) {\n            const data = new FormData();\n            const filename = Date.now() + file.name;\n            data.append(\"name\", filename);\n            data.append(\"file\", file);\n            newPost.photo = filename;\n            try {\n                await axios.post(\"/upload\", data)\n            } catch (err) {\n                console.log(\"File handling error\");\n            }\n\n        }\n        try {\n            const res = await axios.post(\"/posts\", newPost);\n            window.location.replace(\"/post/\" + res.data._id);\n        } catch (err) {\n            console.log(\"File handling error\");\n        }\n\n    };\n\n    return (\n        <div className=\"write\">\n            {/* upload img when user click the + icon */}\n            {file && (\n                <img\n                    src={URL.createObjectURL(file)}\n                    alt=\"\"\n                    className=\"writeImg\"\n                />\n            )}\n            <form className=\"writeForm\" onSubmit={handleSubmit}>\n                <div className=\"writeFormGroup\">\n                    <label htmlFor=\"fileInput\">\n                        <i className=\"writeIcon fas fa-plus\" />\n                    </label>                                                      {/*onChange set new file */}\n                    <input\n                        type=\"file\"\n                        id=\"fileInput\"\n                        style={{ display: \"none\" }}\n                        onChange={(e) => setFile(e.target.files[0])}\n                    />\n                    <input\n                        type=\"text\"\n                        placeholder=\"Title\"\n                        className=\"writeInput\"\n                        autoFocus={true}\n                        onChange={(e) => setTitle(e.target.value)}\n                    />\n                </div>\n\n                <div className=\"writeFormGroup\">\n                    <div className=\"writeFormTextArea\">\n\n                        <div className=\"writeFormGroupTextBar\">\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"bold\">\n                                <i className=\"fa fa-bold\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"italic\">\n                                <i className=\"fa fa-italic\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"underline\">\n                                <i className=\"fa fa-underline\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"insertOrderedList\">\n                                <i className=\"fa fa-list-ol\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"insertUnorderList\">\n                                <i className=\"fa fa-list-ul\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"createLink\">\n                                <i className=\"fa fa-link\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"justifyLeft\">\n                                <i className=\"fa fa-align-left\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"justifyCenter\">\n                                <i className=\"fa fa-align-center\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"justifyRight\">\n                                <i className=\"fa fa-align-right\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"justifyFull\">\n                                <i className=\"fa fa-align-justify\"></i>\n                            </button>\n                            <button type=\"button\" className=\"writeIconHeader btn\" data-element=\"insertImage\">\n                                <i className=\"fa fa-image\"></i>\n                            </button>\n                        </div>\n\n                        <textarea\n                            type=\"text\"\n                            className=\"writeInput writeText\"\n                            placeholder=\"Tell your story...\"\n                            onChange={(e) => setDesc(e.target.value)}\n                        ></textarea>\n                    </div>\n                    <button className=\"writeSubmit\" type=\"submit\" >Publish</button>\n                </div>\n            </form>\n\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}